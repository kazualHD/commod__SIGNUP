function email_test(e) {
    return !/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)
}
let sliders = document.querySelectorAll("._swiper");
if (sliders) {
    for (let e = 0; e < sliders.length; e++) {
        let t = sliders[e];
        if (!t.classList.contains("swiper-bild")) {
            let e = t.children;
            if (e)
                for (let t = 0; t < e.length; t++) {
                    e[t].classList.add("swiper-slide")
                }
            let n = t.innerHTML
              , o = document.createElement("div");
            if (o.classList.add("swiper-wrapper"),
            o.innerHTML = n,
            t.innerHTML = "",
            t.appendChild(o),
            t.classList.add("swiper-bild"),
            t.classList.contains("_swiper_scroll")) {
                let e = document.createElement("div");
                e.classList.add("swiper-scrollbar"),
                t.appendChild(e)
            }
        }
        t.classList.contains("_gallery")
    }
    sliders_bild_callback()
}
function sliders_bild_callback(e) {}
let sliderScrollItems = document.querySelectorAll("._swiper_scroll");
if (sliderScrollItems.length > 0)
    for (let e = 0; e < sliderScrollItems.length; e++) {
        const t = sliderScrollItems[e]
          , n = t.querySelector(".swiper-scrollbar");
        new Swiper(t,{
            observer: !0,
            observeParents: !0,
            direction: "vertical",
            slidesPerView: "auto",
            freeMode: !0,
            scrollbar: {
                el: n,
                draggable: !0,
                snapOnRelease: !1
            },
            mousewheel: {
                releaseOnEdges: !0
            }
        }).scrollbar.updateSize()
    }
function sliders_bild_callback(e) {}
let slider_initial = new Swiper(".initial__slider",{
    autoplay: {
        delay: 4e3,
        disableOnInteraction: !1
    },
    observer: !0,
    observeParents: !0,
    slidesPerView: 1,
    spaceBetween: 0,
    autoHeight: !1,
    speed: 1800,
    loop: !0,
    pagination: {
        el: ".initial__pagination",
        clickable: !0
    },
    navigation: {
        nextEl: ".initial__control_next",
        prevEl: ".initial__control_prev"
    },
    on: {
        lazyImageReady: function() {
            ibg()
        }
    }
})
  , slider_news = new Swiper(".news__slider",{
    observer: !0,
    observeParents: !0,
    slidesPerView: 1,
    spaceBetween: 48,
    autoHeight: !1,
    speed: 800,
    pagination: {
        el: ".news__pagination",
        clickable: !0
    },
    navigation: {
        nextEl: ".news__control_next",
        prevEl: ".news__control_prev"
    },
    on: {
        lazyImageReady: function() {
            ibg()
        }
    }
})
  , slider_functional = new Swiper(".functional__slider",{
    observer: !0,
    observeParents: !0,
    slidesPerView: 1,
    spaceBetween: 48,
    autoHeight: !1,
    speed: 800,
    pagination: {
        el: ".functional__pagination",
        clickable: !0
    },
    navigation: {
        nextEl: ".functional__control_next",
        prevEl: ".functional__control_prev"
    },
    on: {
        lazyImageReady: function() {
            ibg()
        }
    }
})
  , slider_otherModules = new Swiper(".other-modules__slider",{
    observer: !0,
    observeParents: !0,
    slidesPerView: 4,
    slidesPerGroup: 4,
    spaceBetween: 30,
    autoHeight: !1,
    speed: 800,
    navigation: {
        nextEl: ".other-modules__control_next",
        prevEl: ".other-modules__control_prev"
    },
    on: {
        lazyImageReady: function() {
            ibg()
        }
    }
})
  , slider_offer = new Swiper(".offer__slider",{
    observer: !0,
    observeParents: !0,
    slidesPerView: 1,
    spaceBetween: 0,
    autoHeight: !1,
    speed: 800,
    navigation: {
        nextEl: ".offer__control_next",
        prevEl: ".offer__control_prev"
    },
    on: {
        lazyImageReady: function() {
            ibg()
        }
    }
})
  , slider_versions = new Swiper(".versions-slider__slider",{
    observer: !0,
    observeParents: !0,
    slidesPerView: 1,
    spaceBetween: 0,
    autoHeight: !1,
    speed: 800,
    pagination: {
        el: ".versions-slider__pagination",
        clickable: !0
    },
    navigation: {
        nextEl: ".versions-slider__control_next",
        prevEl: ".versions-slider__control_prev"
    },
    on: {
        lazyImageReady: function() {
            ibg()
        }
    }
})
  , slider_article = new Swiper(".article__track",{
    observer: !0,
    observeParents: !0,
    slidesPerView: 1,
    spaceBetween: 0,
    autoHeight: !1,
    speed: 800,
    pagination: {
        el: ".article__pagination",
        clickable: !0
    },
    navigation: {
        nextEl: ".article__control_next",
        prevEl: ".article__control_prev"
    },
    on: {
        lazyImageReady: function() {
            ibg()
        }
    }
});
var ua = window.navigator.userAgent
  , msie = ua.indexOf("MSIE ")
  , isMobile = {
    Android: function() {
        return navigator.userAgent.match(/Android/i)
    },
    BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i)
    },
    iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i)
    },
    Opera: function() {
        return navigator.userAgent.match(/Opera Mini/i)
    },
    Windows: function() {
        return navigator.userAgent.match(/IEMobile/i)
    },
    any: function() {
        return isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows()
    }
};
function isIE() {
    return (ua = navigator.userAgent).indexOf("MSIE ") > -1 || ua.indexOf("Trident/") > -1
}
function testWebP(e) {
    var t = new Image;
    t.onload = t.onerror = function() {
        e(2 == t.height)
    }
    ,
    t.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"
}
function ibg() {
    if (isIE()) {
        let t = document.querySelectorAll("._ibg");
        for (var e = 0; e < t.length; e++)
            t[e].querySelector("img") && null != t[e].querySelector("img").getAttribute("src") && (t[e].style.backgroundImage = "url(" + t[e].querySelector("img").getAttribute("src") + ")")
    }
}
isIE() && document.querySelector("html").classList.add("ie"),
isMobile.any() && document.querySelector("html").classList.add("_touch"),
testWebP((function(e) {
    !0 === e ? document.querySelector("html").classList.add("_webp") : document.querySelector("html").classList.add("_no-webp")
}
)),
ibg(),
window.addEventListener("load", (function() {
    document.querySelector(".wrapper") && setTimeout((function() {
        document.querySelector(".wrapper").classList.add("_loaded")
    }
    ), 0)
}
));
let unlock = !0;
if (location.hash) {
    const e = location.hash.replace("#", "");
    document.querySelector(".popup_" + e) ? popup_open(e) : document.querySelector("div." + e) && _goto(document.querySelector("." + e), 500, "")
}
let iconMenu = document.querySelector(".icon-menu");
if (null != iconMenu) {
    let e = 300
      , t = document.querySelector(".menu__body");
    iconMenu.addEventListener("click", (function(n) {
        unlock && (body_lock(e),
        iconMenu.classList.toggle("_active"),
        t.classList.toggle("_active"))
    }
    ))
}
function menu_close() {
    let e = document.querySelector(".icon-menu")
      , t = document.querySelector(".menu__body");
    e.classList.remove("_active"),
    t.classList.remove("_active")
}
function body_lock(e) {
    document.querySelector("body").classList.contains("_lock") ? body_lock_remove(e) : body_lock_add(e)
}
function body_lock_remove(e) {
    let t = document.querySelector("body");
    if (unlock) {
        let n = document.querySelectorAll("._lp");
        setTimeout((()=>{
            for (let e = 0; e < n.length; e++) {
                n[e].style.paddingRight = "0px"
            }
            t.style.paddingRight = "0px",
            t.classList.remove("_lock")
        }
        ), e),
        unlock = !1,
        setTimeout((function() {
            unlock = !0
        }
        ), e)
    }
}
function body_lock_add(e) {
    let t = document.querySelector("body");
    if (unlock) {
        let n = document.querySelectorAll("._lp");
        for (let e = 0; e < n.length; e++) {
            n[e].style.paddingRight = window.innerWidth - document.querySelector(".wrapper").offsetWidth + "px"
        }
        t.style.paddingRight = window.innerWidth - document.querySelector(".wrapper").offsetWidth + "px",
        t.classList.add("_lock"),
        unlock = !1,
        setTimeout((function() {
            unlock = !0
        }
        ), e)
    }
}
let title = document.querySelectorAll("._letter-animation");
if (title)
    for (let e = 0; e < title.length; e++) {
        let t = title[e]
          , n = t.innerHTML.replace("  ", " ").split(" ")
          , o = "";
        for (let e = 0; e < n.length; e++) {
            let i = n[e]
              , l = i.length;
            o += "<p>";
            for (let e = 0; e < l; e++) {
                let t = i.substr(e, 1);
                " " == t && (t = "&nbsp;"),
                o = o + "<span>" + t + "</span>"
            }
            t.innerHTML = o,
            o += "&nbsp;</p>"
        }
    }
let tabs = document.querySelectorAll("._tabs");
for (let e = 0; e < tabs.length; e++) {
    let t = tabs[e]
      , n = t.querySelectorAll("._tabs-item")
      , o = t.querySelectorAll("._tabs-block");
    for (let e = 0; e < n.length; e++) {
        let t = n[e];
        t.addEventListener("click", (function(i) {
            for (let e = 0; e < n.length; e++) {
                n[e].classList.remove("_active"),
                o[e].classList.remove("_active")
            }
            t.classList.add("_active"),
            o[e].classList.add("_active"),
            i.preventDefault()
        }
        ))
    }
}
const spollersArray = document.querySelectorAll("[data-spollers]");
if (spollersArray.length > 0) {
    const e = Array.from(spollersArray).filter((function(e, t, n) {
        return !e.dataset.spollers.split(",")[0]
    }
    ));
    e.length > 0 && initSpollers(e);
    const t = Array.from(spollersArray).filter((function(e, t, n) {
        return e.dataset.spollers.split(",")[0]
    }
    ));
    if (t.length > 0) {
        const e = [];
        t.forEach((t=>{
            const n = {}
              , o = t.dataset.spollers.split(",");
            n.value = o[0],
            n.type = o[1] ? o[1].trim() : "max",
            n.item = t,
            e.push(n)
        }
        ));
        let n = e.map((function(e) {
            return "(" + e.type + "-width: " + e.value + "px)," + e.value + "," + e.type
        }
        ));
        n = n.filter((function(e, t, n) {
            return n.indexOf(e) === t
        }
        )),
        n.forEach((t=>{
            const n = t.split(",")
              , o = n[1]
              , i = n[2]
              , l = window.matchMedia(n[0])
              , r = e.filter((function(e) {
                if (e.value === o && e.type === i)
                    return !0
            }
            ));
            l.addListener((function() {
                initSpollers(r, l)
            }
            )),
            initSpollers(r, l)
        }
        ))
    }
    function initSpollers(e, t=!1) {
        e.forEach((e=>{
            e = t ? e.item : e,
            t.matches || !t ? (e.classList.add("_init"),
            initSpollerBody(e),
            e.addEventListener("click", setSpollerAction)) : (e.classList.remove("_init"),
            initSpollerBody(e, !1),
            e.removeEventListener("click", setSpollerAction))
        }
        ))
    }
    function initSpollerBody(e, t=!0) {
        const n = e.querySelectorAll("[data-spoller]");
        n.length > 0 && n.forEach((e=>{
            t ? (e.removeAttribute("tabindex"),
            e.classList.contains("_active") || (e.nextElementSibling.hidden = !0)) : (e.setAttribute("tabindex", "-1"),
            e.nextElementSibling.hidden = !1)
        }
        ))
    }
    function setSpollerAction(e) {
        const t = e.target;
        if (t.hasAttribute("data-spoller") || t.closest("[data-spoller]")) {
            const n = t.hasAttribute("data-spoller") ? t : t.closest("[data-spoller]")
              , o = n.closest("[data-spollers]")
              , i = !!o.hasAttribute("data-one-spoller");
            o.querySelectorAll("._slide").length || (i && !n.classList.contains("_active") && hideSpollersBody(o),
            n.classList.toggle("_active"),
            _slideToggle(n.nextElementSibling, 500)),
            e.preventDefault()
        }
    }
    function hideSpollersBody(e) {
        const t = e.querySelector("[data-spoller]._active");
        t && (t.classList.remove("_active"),
        _slideUp(t.nextElementSibling, 500))
    }
}
let gallery = document.querySelectorAll("._gallery");
function gallery_init() {
    for (let e = 0; e < gallery.length; e++) {
        const t = gallery[e];
        lightGallery(t, {
            counter: !1,
            selector: "a",
            download: !1
        })
    }
}
function search_in_list(e) {
    let t = e.parentNode.querySelector("ul").querySelectorAll("li")
      , n = e.value.toUpperCase();
    for (i = 0; i < t.length; i++) {
        let e = t[i]
          , o = e;
        txtValue = o.textContent || o.innerText,
        txtValue.toUpperCase().indexOf(n) > -1 ? e.style.display = "" : e.style.display = "none"
    }
}
function digi(e) {
    return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g, "$1 ")
}
function digi_animate(e) {
    if (e.length > 0)
        for (let t = 0; t < e.length; t++) {
            const n = e[t]
              , o = parseInt(n.innerHTML.replace(" ", ""));
            n.classList.contains("_done") || digi_animate_value(n, 0, o, 1500)
        }
}
function digi_animate_value(e, t, n, o) {
    var i = e
      , l = n - t
      , r = Math.abs(Math.floor(o / l));
    r = Math.max(r, 50);
    var s, a = (new Date).getTime() + o;
    function c() {
        var e = (new Date).getTime()
          , t = Math.max((a - e) / o, 0)
          , r = Math.round(n - t * l);
        i.innerHTML = digi(r),
        r == n && clearInterval(s)
    }
    s = setInterval(c, r),
    c(),
    e.classList.add("_done")
}
gallery && gallery_init();
let popup_link = document.querySelectorAll("._popup-link")
  , popups = document.querySelectorAll(".popup");
for (let e = 0; e < popup_link.length; e++) {
    const t = popup_link[e];
    t.addEventListener("click", (function(e) {
        if (unlock) {
            popup_open(t.getAttribute("href").replace("#", ""), t.getAttribute("data-video"))
        }
        e.preventDefault()
    }
    ))
}
for (let e = 0; e < popups.length; e++) {
    popups[e].addEventListener("click", (function(e) {
        e.target.closest(".popup__body") || popup_close(e.target.closest(".popup"))
    }
    ))
}
function popup_open(e, t="") {
    document.querySelectorAll(".popup._active").length > 0 && popup_close("", !1);
    let n = document.querySelector(".popup_" + e);
    if (n && unlock) {
        if ("" != t && null != t) {
            document.querySelector(".popup_video").querySelector(".popup__video").innerHTML = '<iframe src="https://www.youtube.com/embed/' + t + '?autoplay=1"  allow="autoplay; encrypted-media" allowfullscreen></iframe>'
        }
        document.querySelector(".menu__body._active") || body_lock_add(500),
        n.classList.add("_active"),
        history.pushState("", "", "#" + e)
    }
}
function popup_close(e, t=!0) {
    if (unlock) {
        if (e) {
            let t = e.querySelector(".popup__video");
            t && (t.innerHTML = ""),
            e.classList.remove("_active")
        } else
            for (let e = 0; e < popups.length; e++) {
                const t = popups[e];
                let n = t.querySelector(".popup__video");
                n && (n.innerHTML = ""),
                t.classList.remove("_active")
            }
        !document.querySelector(".menu__body._active") && t && body_lock_remove(500),
        history.pushState("", "", window.location.href.split("#")[0])
    }
}
let popup_close_icon = document.querySelectorAll(".popup__close,._popup-close");
if (popup_close_icon)
    for (let e = 0; e < popup_close_icon.length; e++) {
        const t = popup_close_icon[e];
        t.addEventListener("click", (function() {
            popup_close(t.closest(".popup"))
        }
        ))
    }
document.addEventListener("keydown", (function(e) {
    "Escape" === e.code && popup_close()
}
));
let _slideUp = (e,t=500)=>{
    e.classList.contains("_slide") || (e.classList.add("_slide"),
    e.style.transitionProperty = "height, margin, padding",
    e.style.transitionDuration = t + "ms",
    e.style.height = e.offsetHeight + "px",
    e.offsetHeight,
    e.style.overflow = "hidden",
    e.style.height = 0,
    e.style.paddingTop = 0,
    e.style.paddingBottom = 0,
    e.style.marginTop = 0,
    e.style.marginBottom = 0,
    window.setTimeout((()=>{
        e.hidden = !0,
        e.style.removeProperty("height"),
        e.style.removeProperty("padding-top"),
        e.style.removeProperty("padding-bottom"),
        e.style.removeProperty("margin-top"),
        e.style.removeProperty("margin-bottom"),
        e.style.removeProperty("overflow"),
        e.style.removeProperty("transition-duration"),
        e.style.removeProperty("transition-property"),
        e.classList.remove("_slide")
    }
    ), t))
}
  , _slideDown = (e,t=500)=>{
    if (!e.classList.contains("_slide")) {
        e.classList.add("_slide"),
        e.hidden && (e.hidden = !1);
        let n = e.offsetHeight;
        e.style.overflow = "hidden",
        e.style.height = 0,
        e.style.paddingTop = 0,
        e.style.paddingBottom = 0,
        e.style.marginTop = 0,
        e.style.marginBottom = 0,
        e.offsetHeight,
        e.style.transitionProperty = "height, margin, padding",
        e.style.transitionDuration = t + "ms",
        e.style.height = n + "px",
        e.style.removeProperty("padding-top"),
        e.style.removeProperty("padding-bottom"),
        e.style.removeProperty("margin-top"),
        e.style.removeProperty("margin-bottom"),
        window.setTimeout((()=>{
            e.style.removeProperty("height"),
            e.style.removeProperty("overflow"),
            e.style.removeProperty("transition-duration"),
            e.style.removeProperty("transition-property"),
            e.classList.remove("_slide")
        }
        ), t)
    }
}
  , _slideToggle = (e,t=500)=>e.hidden ? _slideDown(e, t) : _slideUp(e, t);
function _wrap(e, t) {
    e.parentNode.insertBefore(t, e),
    t.appendChild(e)
}
function _removeClasses(e, t) {
    for (var n = 0; n < e.length; n++)
        e[n].classList.remove(t)
}
function _is_hidden(e) {
    return null === e.offsetParent
}
let moreBlocks = document.querySelectorAll("._more-block");
if (moreBlocks.length > 0) {
    let e = document.querySelector(".wrapper");
    for (let t = 0; t < moreBlocks.length; t++) {
        const n = moreBlocks[t];
        let o = n.querySelectorAll("._more-item");
        if (o.length > 0) {
            let t, i = n.querySelector("._more-link"), l = n.querySelector("._more-content"), r = l.getAttribute("data-view");
            function setSize(n) {
                let i, s = 0, a = 0;
                for (let e = 0; e < o.length; e++)
                    e < r && (s += o[e].offsetHeight),
                    a += o[e].offsetHeight;
                i = "start" === n ? a : s,
                t = window.innerWidth - e.offsetWidth,
                l.style.height = `${i}px`
            }
            function updateSize() {
                let n = window.innerWidth - e.offsetWidth;
                (0 === t && n > 0 || t > 0 && 0 === n) && (i.classList.contains("_active") ? setSize("start") : setSize())
            }
            "0s" === getComputedStyle(l).getPropertyValue("transition-duration") && (l.style.cssText = "transition-duration: 1ms"),
            i.addEventListener("click", (function(e) {
                i.classList.contains("_active") ? setSize() : setSize("start"),
                i.classList.toggle("_active"),
                e.preventDefault()
            }
            )),
            l.addEventListener("transitionend", updateSize, !1),
            window.addEventListener("resize", (function(e) {
                i.classList.contains("_active") ? setSize("start") : setSize()
            }
            )),
            setSize()
        }
    }
}
const ratings = document.querySelectorAll(".rating");
function initRatings() {
    let e, t;
    for (let e = 0; e < ratings.length; e++) {
        n(ratings[e])
    }
    function n(e) {
        o(e),
        i(),
        e.classList.contains("rating_set") && function(e) {
            const n = e.querySelectorAll(".rating__item");
            for (let r = 0; r < n.length; r++) {
                const s = n[r];
                s.addEventListener("mouseenter", (function(t) {
                    o(e),
                    i(s.value)
                }
                )),
                s.addEventListener("mouseleave", (function(e) {
                    i()
                }
                )),
                s.addEventListener("click", (function(n) {
                    o(e),
                    e.dataset.ajax ? l(s.value, e) : (t.innerHTML = r + 1,
                    i())
                }
                ))
            }
        }(e)
    }
    function o(n) {
        e = n.querySelector(".rating__active"),
        t = n.querySelector(".rating__value")
    }
    function i(n=t.innerHTML) {
        const o = n / .05;
        e.style.width = `${o}%`
    }
    async function l(e, n) {
        if (!n.classList.contains("rating_sending")) {
            n.classList.add("rating_sending");
            let e = await fetch("rating.json", {
                method: "GET"
            });
            if (e.ok) {
                const o = (await e.json()).newRating;
                t.innerHTML = o,
                i(),
                n.classList.remove("rating_sending")
            } else
                alert("Ошибка"),
                n.classList.remove("rating_sending")
        }
    }
}
function animate({timing: e, draw: t, duration: n}) {
    let o = performance.now();
    requestAnimationFrame((function i(l) {
        let r = (l - o) / n;
        r > 1 && (r = 1);
        let s = e(r);
        t(s),
        r < 1 && requestAnimationFrame(i)
    }
    ))
}
function makeEaseOut(e) {
    return function(t) {
        return 1 - e(1 - t)
    }
}
function makeEaseInOut(e) {
    return function(t) {
        return t < .5 ? e(2 * t) / 2 : (2 - e(2 * (1 - t))) / 2
    }
}
function quad(e) {
    return Math.pow(e, 2)
}
function circ(e) {
    return 1 - Math.sin(Math.acos(e))
}
ratings.length > 0 && initRatings(),
Element.prototype.closest || (Element.prototype.closest = function(e) {
    for (var t = this; t; ) {
        if (t.matches(e))
            return t;
        t = t.parentElement
    }
    return null
}
),
Element.prototype.matches || (Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector);
let clientHeight = document.querySelector("._scroll").clientHeight
  , headerFix = document.querySelector(".fix");
function videoPlay(e) {
    var t = e.find(".functional__video")
      , n = t.data("src");
    e.addClass("_active"),
    t.attr("src", n)
}
function videoStop(e) {
    if (e)
        t = e.find(".functional__video");
    else {
        e = $(".functional__slide");
        var t = $(".functional__video")
    }
    e.removeClass("_active"),
    t.attr("src", "")
}
window.onscroll = function() {
    window.pageYOffset > clientHeight ? headerFix.classList.add("_fixed") : window.pageYOffset < 1 && headerFix.classList.remove("_fixed")
}
,
$(document).on("click", ".functional__btn", (function(e) {
    e.preventDefault(),
    videoPlay($(this).closest(".functional__slide"))
}
));
let goto_links = document.querySelectorAll("._goto");
if (goto_links)
    for (let e = 0; e < goto_links.length; e++) {
        let t = goto_links[e];
        t.addEventListener("click", (function(e) {
            let n = t.getAttribute("href").replace("#", "");
            _goto(document.querySelector("." + n), 1e3),
            e.preventDefault()
        }
        ))
    }
function _goto(e, t, n=0) {
    let o = {
        speedAsDuration: !0,
        speed: t,
        header: "",
        offset: n,
        easing: "easeOutQuad"
    };
    (new SmoothScroll).animateScroll(e, "", o)
}
const $input = $(".input");
function inputOnKeypress() {
    const e = $(this);
    e.closest(".inp-box").toggleClass("_active", null !== e.val().match(/[^\s]/))
}
$input.each(inputOnKeypress),
$input.on("keyup keypress", inputOnKeypress);
let forms = document.querySelectorAll("form");
if (forms.length > 0)
    for (let e = 0; e < forms.length; e++) {
        forms[e].addEventListener("submit", form_submit)
    }
async function form_submit(e) {
    let t = e.target.closest("form");
    if (0 == form_validate(t)) {
        let n = t.getAttribute("action") ? t.getAttribute("action").trim() : "#"
          , o = t.getAttribute("method") ? t.getAttribute("method").trim() : "GET";
        const i = t.getAttribute("data-message");
        if (t.getAttribute("data-ajax")) {
            e.preventDefault();
            let l = new FormData(t);
            t.classList.add("_sending");
            let r = await fetch(n, {
                method: o,
                body: l
            });
            if (r.ok) {
                await r.json();
                t.classList.remove("_sending"),
                i && popup_open(i + "-message"),
                form_clean(t)
            } else
                alert("Ошибка"),
                t.classList.remove("_sending")
        }
        t.hasAttribute("data-test") && (e.preventDefault(),
        i && popup_open(i + "-message"),
        form_clean(t))
    } else {
        let n = t.querySelectorAll("._error");
        n && t.classList.contains("_goto-error") && _goto(n[0], 1e3, 50),
        e.preventDefault()
    }
}
function form_validate(e) {
    let t = 0
      , n = e.querySelectorAll("._req");
    if (n.length > 0)
        for (let e = 0; e < n.length; e++) {
            const o = n[e];
            _is_hidden(o) || (t += form_validate_input(o))
        }
    return t
}
function form_validate_input(e) {
    let t = 0
      , n = e.getAttribute("data-value");
    if ("email" == e.getAttribute("name") || e.classList.contains("_email")) {
        if (e.value != n) {
            let t = e.value.replace(" ", "");
            e.value = t
        }
        email_test(e) || e.value == n ? (form_add_error(e),
        t++) : form_remove_error(e)
    } else
        "checkbox" == e.getAttribute("type") && 0 == e.checked || "" == e.value || e.value == n ? (form_add_error(e),
        t++) : form_remove_error(e);
    return t
}
function form_add_error(e) {
    e.classList.add("_error"),
    e.parentElement.classList.add("_error");
    let t = e.parentElement.querySelector(".form__error");
    t && e.parentElement.removeChild(t);
    let n = e.getAttribute("data-error");
    n && "" != n && e.parentElement.insertAdjacentHTML("beforeend", '<div class="form__error">' + n + "</div>")
}
function form_remove_error(e) {
    e.classList.remove("_error"),
    e.parentElement.classList.remove("_error");
    let t = e.parentElement.querySelector(".form__error");
    t && e.parentElement.removeChild(t)
}
function form_clean(e) {
    let t = e.querySelectorAll("input,textarea");
    for (let e = 0; e < t.length; e++) {
        const n = t[e];
        n.parentElement.classList.remove("_focus"),
        n.classList.remove("_focus"),
        n.value = n.getAttribute("data-value")
    }
    let n = e.querySelectorAll(".checkbox__input");
    if (n.length > 0)
        for (let e = 0; e < n.length; e++) {
            n[e].checked = !1
        }
    let o = e.querySelectorAll("select");
    if (o.length > 0)
        for (let e = 0; e < o.length; e++) {
            const t = o[e]
              , n = t.getAttribute("data-default");
            t.value = n,
            select_item(t)
        }
}
let viewPass = document.querySelectorAll("._viewpass");
for (let e = 0; e < viewPass.length; e++) {
    const t = viewPass[e];
    t.addEventListener("click", (function(e) {
        t.classList.contains("_active") ? t.parentElement.querySelector("input").setAttribute("type", "password") : t.parentElement.querySelector("input").setAttribute("type", "text"),
        t.classList.toggle("_active")
    }
    ))
}
let inputs = document.querySelectorAll("input[data-value],textarea[data-value]");
function inputs_init(e) {
    if (e.length > 0)
        for (let t = 0; t < e.length; t++) {
            const n = e[t]
              , o = n.getAttribute("data-value");
            if (input_placeholder_add(n),
            "" != n.value && n.value != o && input_focus_add(n),
            n.addEventListener("focus", (function(e) {
                n.value == o && (input_focus_add(n),
                n.value = ""),
                "pass" === n.getAttribute("data-type") && (n.parentElement.querySelector("._viewpass") && n.parentElement.querySelector("._viewpass").classList.contains("_active") || n.setAttribute("type", "password")),
                n.classList.contains("_date"),
                n.classList.contains("_phone") && (n.classList.add("_mask"),
                Inputmask("+7(999) 999 9999", {
                    clearIncomplete: !0,
                    clearMaskOnLostFocus: !0,
                    onincomplete: function() {
                        input_clear_mask(n, o)
                    }
                }).mask(n)),
                n.classList.contains("_digital") && (n.classList.add("_mask"),
                Inputmask("9{1,}", {
                    placeholder: "",
                    clearIncomplete: !0,
                    clearMaskOnLostFocus: !0,
                    onincomplete: function() {
                        input_clear_mask(n, o)
                    }
                }).mask(n)),
                form_remove_error(n)
            }
            )),
            n.addEventListener("blur", (function(e) {
                "" == n.value && (n.value = o,
                input_focus_remove(n),
                n.classList.contains("_mask") && input_clear_mask(n, o),
                "pass" === n.getAttribute("data-type") && n.setAttribute("type", "text"))
            }
            )),
            n.classList.contains("_date")) {
                const e = datepicker(n, {
                    customDays: ["Пн", "Вт", "Ср", "Чт", "Пт", "Сб", "Вс"],
                    customMonths: ["Янв", "Фев", "Мар", "Апр", "Май", "Июн", "Июл", "Авг", "Сен", "Окт", "Ноя", "Дек"],
                    overlayButton: "Применить",
                    overlayPlaceholder: "Год (4 цифры)",
                    startDay: 1,
                    formatter: (e,t,n)=>{
                        const o = t.toLocaleDateString();
                        e.value = o
                    }
                    ,
                    onSelect: function(e, t, n) {
                        input_focus_add(e.el)
                    }
                })
                  , t = n.getAttribute("data-from")
                  , o = n.getAttribute("data-to");
                t && e.setMin(new Date(t)),
                o && e.setMax(new Date(o))
            }
        }
}
function input_placeholder_add(e) {
    const t = e.getAttribute("data-value");
    "" == e.value && "" != t && (e.value = t)
}
function input_focus_add(e) {
    e.classList.add("_focus"),
    e.parentElement.classList.add("_focus")
}
function input_focus_remove(e) {
    e.classList.remove("_focus"),
    e.parentElement.classList.remove("_focus")
}
function input_clear_mask(e, t) {
    e.inputmask.remove(),
    e.value = t,
    input_focus_remove(e)
}
inputs_init(inputs);
